# –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º –ë–î - –ó–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ

## –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
Backend –æ–±—Ä–∞—â–∞–ª—Å—è –∫ —Ç–∞–±–ª–∏—Ü–∞–º –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Å—Ö–µ–º—ã (–∏—Å–∫–∞–ª –≤ `public`), –Ω–æ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ —Å—Ö–µ–º–∞—Ö `project` –∏ `ai`.

### –≠—Ç–∞–ø 2: –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `.schema()`
–í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `.schema('schema_name').from('table_name')`.

### –≠—Ç–∞–ø 3: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ —Å—Ö–µ–º—É `public` –≤ Supabase, backend –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–∏–º –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `.from('table_name')`.

---

## –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –°—Ö–µ–º–∞ `public` (–≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã):
- ‚úÖ `public.projects` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `project.projects`
- ‚úÖ `public.goals` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `project.goals`
- ‚úÖ `public.goal_subgoals` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `project.goal_subgoals`
- ‚úÖ `public.tasks` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `project.tasks`
- ‚úÖ `public.suggestions` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `project.suggestions`
- ‚úÖ `public.task_card_links` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `project.task_card_links`
- ‚úÖ `public.ai_settings` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `ai.ai_settings`
- ‚úÖ `public.ai_recommendations_cache` ‚Üê –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `ai.ai_recommendations_cache`
- ‚úÖ `public.users` (—É–∂–µ –±—ã–ª–æ)
- ‚úÖ `public.user_settings` (—É–∂–µ –±—ã–ª–æ)
- ‚úÖ `public.cards` (—É–∂–µ –±—ã–ª–æ)
- ‚úÖ `public.card_reviews` (—É–∂–µ –±—ã–ª–æ)
- ‚úÖ `public.card_images` (—É–∂–µ –±—ã–ª–æ)

### –°—Ö–µ–º—ã `ai` –∏ `project`:
‚ùå –£–¥–∞–ª–µ–Ω—ã (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

---

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. ‚úÖ `src/ai/ai.service.ts` (8 –º–µ—Å—Ç)

**–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
```typescript
.from('ai_settings')
.from('ai_recommendations_cache')
.from('goals')
.from('tasks')
.from('projects')
```

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å—Ö–µ–º—ã `public`.

### 2. ‚úÖ `src/projects/projects.service.ts` (8 –º–µ—Å—Ç)

**–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
```typescript
.from('projects')
.from('goals')
.from('tasks')
```

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å—Ö–µ–º—ã `public`.

### 3. ‚úÖ `src/goals/goals.service.ts` (16 –º–µ—Å—Ç)

**–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
```typescript
.from('goals')
.from('goal_subgoals')
```

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å—Ö–µ–º—ã `public`.

### 4. ‚úÖ `src/tasks/tasks.service.ts` (5 –º–µ—Å—Ç)

**–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
```typescript
.from('tasks')
```

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å—Ö–µ–º—ã `public`.

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 37 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 4 —Ñ–∞–π–ª–∞—Ö

**–§–∞–π–ª—ã:**
- `src/ai/ai.service.ts` - 8 –∑–∞–ø—Ä–æ—Å–æ–≤
- `src/projects/projects.service.ts` - 8 –∑–∞–ø—Ä–æ—Å–æ–≤
- `src/goals/goals.service.ts` - 16 –∑–∞–ø—Ä–æ—Å–æ–≤
- `src/tasks/tasks.service.ts` - 5 –∑–∞–ø—Ä–æ—Å–æ–≤

**–õ–∏–Ω—Ç–µ—Ä:** –ù–µ—Ç –æ—à–∏–±–æ–∫ ‚úÖ

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
1. ‚úÖ –ü—Ä–æ–µ–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —á–∏—Ç–∞—é—Ç—Å—è
2. ‚úÖ –¶–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —á–∏—Ç–∞—é—Ç—Å—è
3. ‚úÖ –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —á–∏—Ç–∞—é—Ç—Å—è
4. ‚úÖ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ `relation "public.X" does not exist`

---

**–î–∞—Ç–∞:** 2025-10-28  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 37 –∑–∞–ø—Ä–æ—Å–æ–≤  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞**  
‚úÖ **–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Supabase**  
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render**

–¢–µ–ø–µ—Ä—å backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
```typescript
// –î–ª—è —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ 'project'
.schema('project').from('goals')
.schema('project').from('tasks')
.schema('project').from('projects')

// –î–ª—è —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ 'ai'
.schema('ai').from('ai_settings')
.schema('ai').from('ai_recommendations_cache')

// –î–ª—è —Ç–∞–±–ª–∏—Ü –≤ 'public' (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
.from('users')
.from('cards')
```

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å!** üöÄ

